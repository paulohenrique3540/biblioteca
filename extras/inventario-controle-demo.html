<!-- Esta p√°gina HTML √© uma demonstra√ß√£o do sistema de controle de invent√°rio -->
<!-- Ela simula o processo de invent√°rio f√≠sico de livros usando RFID -->
<!-- Permite iniciar, pausar e finalizar o invent√°rio, com estat√≠sticas em tempo real -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMO - Controle de Invent√°rio</title>
    <link rel="stylesheet" href="/static/css/inventario.css">
</head>
<body>

    <!-- Container principal da p√°gina -->
    <div class="container">
        <!-- Campo oculto para receber dados RFID via Socket.IO -->
        <input type="hidden" id="rfid-input" />

        <!-- Top Section com cabe√ßalho -->
        <div class="top-section">
            <div class="header-row">
                <div class="title-section">
                <div class="text-container">
                    <h2>Biblioteca Digital</h2>
                    <p class="subtitle">Sistema de Biblioteca Digital</p>
                </div>
                    <nav class="menu">
                        <button id="menu-btn">‚ò∞</button>
                        <div class="dropdown-menu" id="dropdown-menu">
                            <button class="dropdown-item" onclick="window.location.href='/ajuda'">‚ùì Ajuda</button>
                            <button class="dropdown-item" onclick="window.location.href='/logout'">üö™ Sair</button>
                        </div>
                    </nav>
                </div>
                    <nav class="navigation">
                        <a href="/cadastro" class="nav-button primary">üìù Cadastrar</a>
                        <a href="/inventario-controle-demo" class="nav-button secondary">üìã Inventario</a>
                        <a href="/listar-livros" class="nav-button secondary">üìã Listar Livros</a>
                        <a href="/alugar-livros" class="nav-button secondary">üìö Alugar Livros</a>
                        <a href="/listar-alunos" class="nav-button secondary">üë• Listar Alunos</a>
                    </nav>
            </div>
        </div>



        <!-- Content Section -->
        <div class="content-section">

        <!-- Grade de estat√≠sticas mostrando m√©tricas do invent√°rio -->
        <div class="stats-grid">
            <!-- Card mostrando o total de livros no invent√°rio -->
            <div class="stat-card">
                <!-- √çcone representando livros -->
                <div class="stat-icon">üìö</div>
                <!-- Informa√ß√µes da estat√≠stica -->
                <div class="stat-info">
                    <!-- T√≠tulo da m√©trica -->
                    <h3>Total de Livros</h3>
                    <!-- Valor num√©rico din√¢mico -->
                    <span class="stat-number" th:text="${totalLivros}">4</span>
                </div>
            </div>

            <!-- Card mostrando livros ainda pendentes de leitura -->
            <div class="stat-card">
                <!-- √çcone vermelho para pendentes -->
                <div class="stat-icon">üî¥</div>
                <div class="stat-info">
                    <h3>Pendentes</h3>
                    <!-- Contador atualizado dinamicamente via JavaScript -->
                    <span class="stat-number warning" id="pendentes-count">4</span>
                </div>
            </div>

            <!-- Card mostrando livros j√° contabilizados -->
            <div class="stat-card">
                <!-- √çcone verde para contabilizados -->
                <div class="stat-icon">üü¢</div>
                <div class="stat-info">
                    <h3>Contabilizados</h3>
                    <!-- Contador atualizado dinamicamente -->
                    <span class="stat-number success" id="contabilizados-count">0</span>
                </div>
            </div>

            <!-- Card mostrando o progresso percentual do invent√°rio -->
            <div class="stat-card">
                <!-- √çcone de gr√°fico -->
                <div class="stat-icon">üìä</div>
                <div class="stat-info">
                    <h3>Progresso</h3>
                    <!-- Porcentagem atualizada dinamicamente -->
                    <span class="stat-number" id="progresso-text">0%</span>
                </div>
            </div>

            <!-- Card mostrando tags RFID n√£o associadas a livros -->
            <div class="stat-card">
                <!-- √çcone para tags n√£o associadas -->
                <div class="stat-icon">‚ö†Ô∏è</div>
                <div class="stat-info">
                    <h3>Tags N√£o Associadas</h3>
                    <!-- Contador atualizado dinamicamente -->
                    <span class="stat-number danger" id="nao-associadas-count">0</span>
                </div>
            </div>
        </div>

        <!-- Bot√µes de controle do invent√°rio -->
        <div class="control-buttons">
            <!-- Bot√£o para iniciar o processo de invent√°rio -->
            <button id="btn-iniciar" class="control-btn primary">üéØ Iniciar Invent√°rio</button>
            <!-- Bot√£o para pausar o invent√°rio (inicialmente desabilitado) -->
            <button id="btn-pausar" class="control-btn secondary" disabled>Pause</button>
            <!-- Bot√£o para finalizar o invent√°rio (inicialmente desabilitado) -->
            <button id="btn-finalizar" class="control-btn success" disabled>‚úÖ Finalizar</button>
            <!-- Bot√£o para resetar o invent√°rio -->
            <button id="btn-reset" class="control-btn danger">üîÑ Reset</button>
        </div>

        <!-- Informa√ß√µes adicionais sobre o status do invent√°rio -->
        <div class="inventory-info">
            <!-- Status atual do invent√°rio -->
            <div class="info-item">
                <span class="info-label">Status:</span>
                <!-- Texto do status atualizado dinamicamente -->
                <span id="status-text" class="info-value">Aguardando in√≠cio</span>
            </div>
            <!-- √öltimo livro lido durante o invent√°rio -->
            <div class="info-item">
                <span class="info-label">√öltimo lido:</span>
                <!-- Nome do √∫ltimo livro lido -->
                <span id="ultimo-lido" class="info-value">Nenhum</span>
            </div>
        </div>

        <!-- Bot√µes para alternar entre tabelas -->
        <div class="table-buttons">
            <button id="btn-pendentes" class="table-btn active">üìö Livros Pendentes</button>
            <button id="btn-contabilizados" class="table-btn">‚úÖ Livros Contabilizados</button>
            <button id="btn-nao-associadas" class="table-btn">‚ö†Ô∏è Tags N√£o Associadas</button>
        </div>

        <!-- Tabelas de listagem detalhada -->
        <div class="tables-container">

            <!-- Tabela de Livros Pendentes -->
            <div id="table-pendentes" class="table-section active">
                <h3>üìö Livros Pendentes (<span id="pendentes-section-count">0</span>)</h3>
                <table id="pendentes-table" class="inventory-table">
                    <thead>
                        <tr>
                            <th>Nome do Livro</th>
                            <th>Autor</th>
                            <th>Tombo</th>
                            <th>RFID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Linhas ser√£o adicionadas dinamicamente via JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Tabela de Livros Contabilizados -->
            <div id="table-contabilizados" class="table-section">
                <h3>‚úÖ Livros Contabilizados (<span id="contabilizados-section-count">0</span>)</h3>
                <table id="contabilizados-table" class="inventory-table">
                    <thead>
                        <tr>
                            <th>Nome do Livro</th>
                            <th>Autor</th>
                            <th>Tombo</th>
                            <th>RFID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Linhas ser√£o adicionadas dinamicamente via JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Tabela de Tags N√£o Associadas -->
            <div id="table-nao-associadas" class="table-section">
                <h3>‚ö†Ô∏è Tags N√£o Associadas (<span id="nao-associadas-section-count">0</span>)</h3>
                <table id="nao-associadas-table" class="inventory-table">
                    <thead>
                        <tr>
                            <th>RFID</th>
                            <th>Timestamp</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Linhas ser√£o adicionadas dinamicamente via JavaScript -->
                    </tbody>
                </table>
            </div>

        </div>

        <!-- Template oculto para livros (usado para clonar) -->
        <div id="livro-template" style="display: none;">
            <div class="inventory-item livro">
                <div class="item-info">
                    <div class="item-title"></div>
                    <div class="item-details">
                        <span class="autor"></span> ‚Ä¢
                        <span class="tombo"></span>
                        <span class="rfid-code"></span>
                    </div>
                </div>
                <div class="item-status">
                    <span class="status-indicator pending" title="Pendente"></span>
                </div>
            </div>
        </div>

        <!-- Template oculto para tags n√£o associadas -->
        <div id="tag-template" style="display: none;">
            <div class="inventory-item tag-nao-associada">
                <div class="item-info">
                    <div class="item-title">Tag RFID N√£o Associada</div>
                    <div class="item-details">
                        <span class="rfid-code tag-value"></span>
                        <span class="timestamp"></span>
                    </div>
                </div>
                <div class="item-status">
                    <span class="status-indicator danger" title="N√£o Associada">‚ö†Ô∏è</span>
                </div>
            </div>
        </div>

        </div> <!-- Fecha content-section -->

        <footer class="footer">
            <p>&copy; 2024 Sistema de Biblioteca Digital</p>
        </footer>

    </div> <!-- Fecha container -->

    <script>
        // Vari√°veis globais para controlar o estado do invent√°rio
        let livros = []; // Array com todos os itens de invent√°rio
        let livrosContabilizados = []; // Array com itens j√° contabilizados
        let inventarioAtivo = false; // Flag indicando se o invent√°rio est√° ativo
        let tagsNaoAssociadas = []; // Array de tags RFID n√£o associadas a livros

        // Refer√™ncias aos elementos DOM para manipula√ß√£o din√¢mica
        const pendentesTable = document.getElementById('pendentes-table').querySelector('tbody');
        const contabilizadosTable = document.getElementById('contabilizados-table').querySelector('tbody');
        const naoAssociadasTable = document.getElementById('nao-associadas-table').querySelector('tbody');
        const pendentesCount = document.getElementById('pendentes-count');
        const contabilizadosCount = document.getElementById('contabilizados-count');
        const progressoText = document.getElementById('progresso-text');
        const naoAssociadasCount = document.getElementById('nao-associadas-count');
        const pendentesSectionCount = document.getElementById('pendentes-section-count');
        const contabilizadosSectionCount = document.getElementById('contabilizados-section-count');
        const naoAssociadasSectionCount = document.getElementById('nao-associadas-section-count');
        const statusText = document.getElementById('status-text');
        const ultimoLido = document.getElementById('ultimo-lido');
        const btnIniciar = document.getElementById('btn-iniciar');
        const btnPausar = document.getElementById('btn-pausar');
        const btnFinalizar = document.getElementById('btn-finalizar');
        const btnReset = document.getElementById('btn-reset');
        const btnPendentes = document.getElementById('btn-pendentes');
        const btnContabilizados = document.getElementById('btn-contabilizados');
        const btnNaoAssociadas = document.getElementById('btn-nao-associadas');
        const tablePendentes = document.getElementById('table-pendentes');
        const tableContabilizados = document.getElementById('table-contabilizados');
        const tableNaoAssociadas = document.getElementById('table-nao-associadas');

        // Templates para clonar elementos
        const livroTemplate = document.getElementById('livro-template').querySelector('.inventory-item');
        const tagTemplate = document.getElementById('tag-template').querySelector('.inventory-item');

        // Fun√ß√£o para inicializar o invent√°rio ao carregar a p√°gina
        function inicializarInventario() {
            // Carregar livros do servidor via Thymeleaf ou dados mockados
            carregarLivrosIniciais();
            atualizarListas();
            atualizarContadores();
            atualizarStatus('Aguardando in√≠cio');
        }

        // Fun√ß√£o para carregar livros iniciais (simula dados do servidor)
        function carregarLivrosIniciais() {
            // Simular dados que viriam do controlador Spring
            const livrosData = [
                { nomeLivro: 'Java Programming', nomeAutor: 'John Doe', numeroTombo: '12345', codigoRfid: 'RFID123' },
                { nomeLivro: 'Spring Boot Guide', nomeAutor: 'Jane Smith', numeroTombo: '12346', codigoRfid: 'RFID124' },
                { nomeLivro: 'Database Design', nomeAutor: 'Bob Johnson', numeroTombo: '12347', codigoRfid: null },
                { nomeLivro: 'Web Development', nomeAutor: 'Alice Brown', numeroTombo: '12348', codigoRfid: 'RFID125' }
            ];

            livros = [];
            livrosData.forEach(livroData => {
                const livroRow = criarLinhaLivro(livroData);
                livros.push({
                    element: livroRow,
                    data: livroData,
                    contabilizado: false
                });
            });
        }

        // Fun√ß√£o para criar linha de tabela para livro
        function criarLinhaLivro(livroData) {
            const row = document.createElement('tr');
            row.setAttribute('data-rfid', livroData.codigoRfid || 'SEM-RFID');

            // Coluna Nome do Livro
            const nomeCell = document.createElement('td');
            nomeCell.textContent = livroData.nomeLivro;
            row.appendChild(nomeCell);

            // Coluna Autor
            const autorCell = document.createElement('td');
            autorCell.textContent = livroData.nomeAutor;
            row.appendChild(autorCell);

            // Coluna Tombo
            const tomboCell = document.createElement('td');
            tomboCell.textContent = livroData.numeroTombo;
            row.appendChild(tomboCell);

            // Coluna RFID
            const rfidCell = document.createElement('td');
            rfidCell.textContent = livroData.codigoRfid || 'Sem RFID';
            row.appendChild(rfidCell);

            // Adicionar evento de clique para simula√ß√£o
            if (livroData.codigoRfid) {
                row.onclick = () => simularLeitura(livroData.codigoRfid, livroData.nomeLivro);
                row.style.cursor = 'pointer';
            }

            return row;
        }

        // Fun√ß√£o para atualizar todas as listas
        function atualizarListas() {
            // Limpar listas
            pendentesTable.innerHTML = '';
            contabilizadosTable.innerHTML = '';
            naoAssociadasTable.innerHTML = '';

            // Adicionar livros √†s listas apropriadas
            livros.forEach(livro => {
                if (livro.contabilizado) {
                    contabilizadosTable.appendChild(livro.element);
                } else {
                    pendentesTable.appendChild(livro.element);
                }
            });

            // Adicionar tags n√£o associadas
            tagsNaoAssociadas.forEach(tag => {
                const row = document.createElement('tr');
                const rfidCell = document.createElement('td');
                rfidCell.textContent = tag.rfid;
                row.appendChild(rfidCell);

                const timestampCell = document.createElement('td');
                timestampCell.textContent = tag.timestamp.toLocaleString();
                row.appendChild(timestampCell);

                const actionsCell = document.createElement('td');
                const button = document.createElement('button');
                button.textContent = 'Cadastrar';
                button.onclick = () => cadastrarComoLivro(tag.rfid);
                actionsCell.appendChild(button);
                row.appendChild(actionsCell);

                naoAssociadasTable.appendChild(row);
            });

            // Atualizar contadores das se√ß√µes
            pendentesSectionCount.textContent = livros.filter(l => !l.contabilizado).length;
            contabilizadosSectionCount.textContent = livros.filter(l => l.contabilizado).length;
            naoAssociadasSectionCount.textContent = tagsNaoAssociadas.length;
        }

        // Fun√ß√£o para atualizar os contadores de estat√≠sticas
        function atualizarContadores() {
            const contabilizados = livros.filter(l => l.contabilizado).length;
            const pendentes = livros.length - contabilizados;
            const progresso = livros.length > 0 ? Math.round((contabilizados / livros.length) * 100) : 0;

            pendentesCount.textContent = pendentes;
            contabilizadosCount.textContent = contabilizados;
            progressoText.textContent = progresso + '%';
            naoAssociadasCount.textContent = tagsNaoAssociadas.length;

            // Atualizar cores dos contadores baseado no status
            pendentesCount.className = pendentes > 0 ? 'stat-number warning' : 'stat-number success';
            contabilizadosCount.className = 'stat-number success';
            naoAssociadasCount.className = tagsNaoAssociadas.length > 0 ? 'stat-number danger' : 'stat-number success';
        }

        // Fun√ß√£o para atualizar o texto de status do invent√°rio
        function atualizarStatus(status) {
            statusText.textContent = status;
        }

        // Fun√ß√£o para cadastrar uma tag n√£o associada como livro
        function cadastrarComoLivro(rfid) {
            // Redirecionar para a p√°gina de cadastro com o RFID pr√©-preenchido
            window.location.href = `/cadastro?rfid=${encodeURIComponent(rfid)}`;
        }

        // Fun√ß√£o para simular leitura de RFID atrav√©s de clique (para demonstra√ß√£o)
        function simularLeitura(rfid, titulo) {
            if (!inventarioAtivo) return; // S√≥ funciona se invent√°rio estiver ativo

            // Encontrar o livro no array
            const livroIndex = livros.findIndex(l => l.data.codigoRfid === rfid);
            if (livroIndex === -1) return; // Livro n√£o encontrado

            const livro = livros[livroIndex];

            // Verificar se j√° foi contabilizado
            if (livro.contabilizado) return;

            // Marcar como contabilizado
            livro.contabilizado = true;
            livro.element.classList.remove('pending');
            livro.element.classList.add('completed');
            livro.element.classList.add('lido');

            const statusIndicator = livro.element.querySelector('.status-indicator');
            statusIndicator.className = 'status-indicator completed';

            // Atualizar listas e contadores
            atualizarListas();
            atualizarContadores();

            // Mostrar √∫ltimo livro lido
            ultimoLido.textContent = titulo;

            // Verificar se invent√°rio foi conclu√≠do
            if (livros.filter(l => l.contabilizado).length === livros.length) {
                finalizarInventario();
            }
        }

        // Fun√ß√£o para marcar livro como lido via RFID real (autom√°tico)
        function marcarLivroLidoPorRFID(rfid) {
            console.log('üîç Procurando item com RFID:', rfid);
            console.log('Invent√°rio ativo:', inventarioAtivo);

            if (!inventarioAtivo) {
                console.log('‚ùå Invent√°rio n√£o est√° ativo, ignorando RFID');
                return; // S√≥ funciona se invent√°rio estiver ativo
            }

            // Encontrar o livro no array
            const livroIndex = livros.findIndex(l => l.data.codigoRfid === rfid);
            if (livroIndex === -1) {
                console.log('‚ùå Item n√£o encontrado para RFID:', rfid);
                // Adicionar √† lista de tags n√£o associadas
                adicionarTagNaoAssociada(rfid);
                return; // Item n√£o encontrado
            }

            const livro = livros[livroIndex];

            if (livro.contabilizado) {
                console.log('‚ö†Ô∏è Item j√° contabilizado:', rfid);
                return; // J√° contabilizado
            }

            console.log('‚úÖ Marcando item como lido:', rfid);

            // Marcar como contabilizado
            livro.contabilizado = true;
            livro.element.classList.remove('pending');
            livro.element.classList.add('completed');
            livro.element.classList.add('lido');

            const statusIndicator = livro.element.querySelector('.status-indicator');
            statusIndicator.className = 'status-indicator completed';

            // Atualizar listas e contadores
            atualizarListas();
            atualizarContadores();
            ultimoLido.textContent = livro.data.nomeLivro;

            console.log('üìä Contadores atualizados. Contabilizados:', livros.filter(l => l.contabilizado).length);

            if (livros.filter(l => l.contabilizado).length === livros.length) {
                finalizarInventario();
            }
        }

        // Fun√ß√£o para adicionar tag n√£o associada
        function adicionarTagNaoAssociada(rfid) {
            // Verificar se j√° existe
            if (tagsNaoAssociadas.some(tag => tag.rfid === rfid)) {
                return; // J√° existe
            }

            // Criar elemento da tag
            const tagClone = tagTemplate.cloneNode(true);
            tagClone.querySelector('.tag-value').textContent = rfid;
            tagClone.querySelector('.timestamp').textContent = new Date().toLocaleTimeString();

            // Adicionar ao array
            tagsNaoAssociadas.push({
                rfid: rfid,
                element: tagClone,
                timestamp: new Date()
            });

            // Atualizar listas e contadores
            atualizarListas();
            atualizarContadores();
            atualizarStatus(`Tag RFID n√£o associada detectada: ${rfid}`);
        }

        // Observa mudan√ßas no input RFID para marcar livro automaticamente
        const rfidInput = document.getElementById('rfid-input');
        if (rfidInput) {
            rfidInput.addEventListener('input', function() {
                const rfid = rfidInput.value.trim();
                if (rfid) {
                    // Verificar se RFID existe no banco via API
                    fetch(`/api/verificar-rfid?rfid=${encodeURIComponent(rfid)}`)
                        .then(response => response.json())
                        .then(exists => {
                            if (exists) {
                                marcarLivroLidoPorRFID(rfid);
                            } else {
                                console.log('RFID n√£o encontrado no banco, adicionando √† lista de tags n√£o associadas.');
                                adicionarTagNaoAssociada(rfid);
                            }
                        })
                        .catch(error => {
                            console.error('Erro ao verificar RFID:', error);
                        });
                    rfidInput.value = ''; // limpa o input ap√≥s marcar
                }
            });
        }

        // Event handler para iniciar o invent√°rio
        btnIniciar.addEventListener('click', function() {
            inventarioAtivo = true;
            btnIniciar.disabled = true;
            btnPausar.disabled = false;
            btnFinalizar.disabled = false;

            // Resetar todos os itens para estado pendente
            livros.forEach(item => {
                item.classList.remove('completed');
                item.classList.add('pending');
                const statusIndicator = item.querySelector('.status-indicator');
                statusIndicator.className = 'status-indicator pending';
            });

            livrosContabilizados = [];
            atualizarContadores();
            atualizarStatus('Invent√°rio em andamento - esperando a leitura de livros...');
        });

        // Event handler para pausar o invent√°rio
        btnPausar.addEventListener('click', function() {
            inventarioAtivo = false;
            btnPausar.disabled = true;
            btnIniciar.disabled = false;
            atualizarStatus('Invent√°rio pausado');
        });

        // Fun√ß√£o para finalizar o invent√°rio (chamada automaticamente ou manualmente)
        function finalizarInventario() {
            inventarioAtivo = false;
            btnFinalizar.disabled = true;
            btnIniciar.disabled = false;
            atualizarStatus('Invent√°rio conclu√≠do! ‚úÖ');
        }

        // Event handler para finalizar o invent√°rio manualmente
        btnFinalizar.addEventListener('click', finalizarInventario);

        // Event handler para resetar o invent√°rio
        btnReset.addEventListener('click', function() {
            inventarioAtivo = false;
            btnIniciar.disabled = false;
            btnPausar.disabled = true;
            btnFinalizar.disabled = true;

            // Resetar todos os itens para estado inicial
            livros.forEach(item => {
                item.contabilizado = false;
                item.element.classList.remove('completed', 'pending', 'lido');
                const statusIndicator = item.element.querySelector('.status-indicator');
                if (statusIndicator) {
                    statusIndicator.className = 'status-indicator pending';
                }
            });

            livrosContabilizados = [];
            tagsNaoAssociadas = []; // Resetar array de tags n√£o associadas
            atualizarListas();
            atualizarContadores();
            atualizarStatus('Aguardando in√≠cio');
            ultimoLido.textContent = 'Nenhum';
        });

        // Menu dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            inicializarInventario();

            const menuBtn = document.getElementById('menu-btn');
            const dropdownMenu = document.getElementById('dropdown-menu');

            menuBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                dropdownMenu.classList.toggle('show');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!menuBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
                    dropdownMenu.classList.remove('show');
                }
            });
        });
    </script>




    <!-- Script para integra√ß√£o com Socket.IO (comunica√ß√£o em tempo real) -->
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script>
        // Estabelece conex√£o com o servidor Node.js no Raspberry Pi para receber dados RFID
        const socket = io("http://192.168.1.216:3000"); // IP do Raspberry Pi

        // Listener para o evento 'rfid' enviado pelo servidor
        // Quando uma tag RFID √© lida, preenche automaticamente o campo de entrada
        socket.on("rfid", (data) => {
            // Log no console para depura√ß√£o
            console.log("Tag recebida no site:", data);
            // Seleciona o campo de entrada RFID pelo ID
            const input = document.getElementById("rfid-input"); // id do seu input
            // Define o valor do campo com a tag recebida
            input.value = data.tag; // preenche o input
            // Dispara o evento 'input' para ativar o listener
            const event = new Event('input', { bubbles: true });
            input.dispatchEvent(event);
        });
    </script>
</body>
</html>
